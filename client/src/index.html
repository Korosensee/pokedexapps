
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokedex</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <main class="container mx-auto flex flex-col">
		<h1 class="text-5xl text-red-600 font-extrabold text-center">Pokedex</h1>
		<form action="http://localhost:4321/api/pokemon" method ="post">
			<h2 class="text-2xl text-red-700 font-bold">Agregar nuevo pokemon</h2>
			<input type="number" name="id" placeholder="ID" class="my-1 w-full p-2 border border-gray-300 rounded-lg" />
			<input type="text" name="name" placeholder="Name" class="my-1 w-full p-2 border border-gray-300 rounded-lg" />
			<button type="submit" class="w-full p-2 bg-red-600 text-white rounded-lg mt-2 font-bold uppercase duration-200 hover:bg-red-700">Agregar</button>
		</form>

		<ul class="mt-4 border-4 border-red-700" id="pokemonsList">
			<li class="flex items-center justify-between border-b border-gray-300 p-2 bg-red-700">
				<span class="text-lg text-white font-extrabold w-1/3">ID</span>
				<span class="text-lg text-white font-extrabold w-1/3 text-center">Name</span>
				<span class="text-lg text-white font-extrabold w-1/3 text-right">DELETE</span>
			</li>


			</li>
		</ul>
		<a href="http://localhost:4321" class="w-full p-2 bg-red-600 text-white rounded-lg mt-2 font-bold uppercase duration-200 hover:bg-red-700 text-center"> Ir al Servidor</a>
	</main>
	<script src="funcionalidad.js"></script>
	<script>
				var pokemones = document.querySelector('#pokemonsList')?.children
		fetch('http://localhost:4321/api/pokemon.json', {method: 'GET'}).then( response => response.json()).then(data =>{
    	for (let pokemon of data.pokemonList){
			// pokeLine es cada componente li con su respectivo estilo e info
			const pokeLine = document.createElement("li")

			// dar estilo con tailwind
			pokeLine.classList = "flex items-center justify-between border-b border-gray-300 p-2"
			pokeLine.innerHTML = `<span class="text-lg text-red-600 font-bold w-1/3">${pokemon.id}</span>
			<span class="text-lg text-red-600 font-bold w-1/3 text-center">${pokemon.name}</span>`

			// como cada li tiene dentro la 'X' para eliminar, lo generamos con la misma lista
			const formDelete = document.createElement("form")
			formDelete.classList = "w-1/3 text-right"
			formDelete.innerHTML ='<button type="submit" class="font-bold hover:font-extrabold">X</button>'

				formDelete.addEventListener("submit", (event) =>{
					event.preventDefault();
					// conectar con el servidor, pasa el id para saber cual eliminar
					fetch(`http://localhost:4321/api/pokemon/${pokemon.id}.json`, {method: 'DELETE'})
					document.getElementById("pokeContainer").removeChild(pokeLine)

				})
				pokeLine.appendChild(formDelete)

				// a√±adir al pokeLine
				document.getElementById("pokemonsList").appendChild(pokeLine)
        	
    		}

		})

	</script>
</body>
</html>
